<!--Se existir erros exibe a mensagem que vem do backend-->
{{#each erros}}
<div class="alert alert-danger">{{texto}}</div>
{{else}}
{{/each}}
<h3>Editar Post: </h3>
<div class="card">
    <div class="card-body">
        <form method="post" action="/postagens/edit" enctype="multipart/form-data">
            <input type="hidden" name="id" value="{{postagem.id}}">
            <label>Título</label>
            <input type="text" placeholder="Título da matéria" name="titulo" class="form-control"
                value="{{postagem.titulo}}" required>
            <br>
            <label>Descrição</label>
            <input type="text" placeholder="Descricao" name="descricao" class="form-control"
                value="{{postagem.descricao}}" required>
            <br>
            <p>Conteudo:</p>
            <textarea name="conteudo" class="form-control">{{postagem.conteudo}}</textarea>
            <br>
            <label>Imagem: </label>
            <input type="file" placeholder="Descricao" name="file" class="form-control" multiple>
            <br>
            <p class="mt-3">Categoria:</p>
            <select name="categoria" class="form-select form-select-sm">

                {{#each categorias}}
                <option value="{{_id}}">{{nome}}</option>
                {{else}}
                <option value="0">Nenhuma categoria registrada</option>
                {{/each}}
            </select>
            <br>
            <button type="submit" class="btn btn-success mt-4">Editar postagem</button>

            <input type="hidden" name="img" value="{{postagem.img}}">
        </form>
    </div>
</div>

    



<script>
    //FUNÇÃO PARA ATUALIZAR A OPÇÃO CATEGORIA
    function atualizaSel() {
        var categoria = document.getElementById("categoria")
        var option1 = document.getElementsByTagName("option")
        var id_sel = "{{postagem.categoria._id}}"

        for (var i = 0; i < option1.length; i++) {
            if (option1[i].value == id_sel) {
                option1[i].setAttribute("selected", "true")
            }
        }
    }

    atualizaSel()
</script>